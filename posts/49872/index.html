<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>linux日常笔记 | GXBLOGS</title><meta name="author" content="ggw &amp; xpl"><meta name="copyright" content="ggw &amp; xpl"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="BSD &amp; System V 风格 BSD（Berkeley Software Distribution）和 System V 都是 Unix 操作系统的重要分支和变体，它们在 Unix 的发展历程中有着重要地位，在系统架构、功能特性和应用场景等方面存在一定差异，以下是具体介绍： BSD  起源与发展：BSD 起源于 20 世纪 70 年代末的加州大学伯克利分校。它是在 AT&amp;T">
<meta property="og:type" content="article">
<meta property="og:title" content="linux日常笔记">
<meta property="og:url" content="https://gxblogs.com/posts/49872/index.html">
<meta property="og:site_name" content="GXBLOGS">
<meta property="og:description" content="BSD &amp; System V 风格 BSD（Berkeley Software Distribution）和 System V 都是 Unix 操作系统的重要分支和变体，它们在 Unix 的发展历程中有着重要地位，在系统架构、功能特性和应用场景等方面存在一定差异，以下是具体介绍： BSD  起源与发展：BSD 起源于 20 世纪 70 年代末的加州大学伯克利分校。它是在 AT&amp;T">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://ggwimgs-1313043536.cos.ap-guangzhou.myqcloud.com/go/Snipaste_2024-12-20_17-08-48.png">
<meta property="article:published_time" content="2025-01-11T18:38:04.424Z">
<meta property="article:modified_time" content="2025-03-29T18:08:36.966Z">
<meta property="article:author" content="ggw &amp; xpl">
<meta property="article:tag" content="linux">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://ggwimgs-1313043536.cos.ap-guangzhou.myqcloud.com/go/Snipaste_2024-12-20_17-08-48.png"><link rel="shortcut icon" href="/static/imgs/paipai.ico"><link rel="canonical" href="https://gxblogs.com/posts/49872/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/pluginsSrc/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="/pluginsSrc/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="/pluginsSrc/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":300},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":200,"languages":{"author":"作者: ggw & xpl","link":"链接: ","source":"来源: GXBLOGS","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: '/pluginsSrc/flickr-justified-gallery/dist/fjGallery.min.js',
      css: '/pluginsSrc/flickr-justified-gallery/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'linux日常笔记',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-03-30 02:08:36'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/ggwsettings.css"><link rel="stylesheet" href="/css/nav_menu.css"><link rel="stylesheet" href="/css/highlight/Kimbiedark.css"><script src="/css/else/echarts.min.js"></script><script src="/css/else/wow.min.js"></script><script type="text/javascript" src="/css/else/echarts-gl.min.js"></script><script src="/css/else/pace.min.js"></script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/static/imgs/loading.gif" data-original="/static/imgs/touxiang.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">71</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">22</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fa fa-comments"></i><span> 留言板</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://ggwimgs-1313043536.cos.ap-guangzhou.myqcloud.com/go/Snipaste_2024-12-20_17-08-48.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">GXBLOGS</a></span><div id="menus"></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 链接</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fa fa-comments"></i><span> 留言板</span></a></div></div><div id="nav-right"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i></a></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">linux日常笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-01-11T18:38:04.424Z" title="发表于 2025-01-12 02:38:04">2025-01-12</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-03-29T18:08:36.966Z" title="更新于 2025-03-30 02:08:36">2025-03-30</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">8.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>34分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/posts/49872/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/posts/49872/" itemprop="commentCount"><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="BSD-System-V-风格">BSD &amp; System V 风格</h2>
<p>BSD（Berkeley Software Distribution）和 System V 都是 Unix 操作系统的重要分支和变体，它们在 Unix 的发展历程中有着重要地位，在系统架构、功能特性和应用场景等方面存在一定差异，以下是具体介绍：</p>
<p><strong>BSD</strong></p>
<ul>
<li><strong>起源与发展</strong>：BSD 起源于 20 世纪 70 年代末的加州大学伯克利分校。它是在 AT&amp;T 的 Unix 基础上进行开发的，添加了许多新的特性和功能。在发展过程中，产生了如 FreeBSD、NetBSD、OpenBSD 等多个衍生版本，这些版本在服务器、嵌入式系统等领域都有广泛应用。</li>
<li>特点
<ul>
<li><strong>网络功能强大</strong>：BSD 在网络方面的支持非常出色，它率先实现了许多重要的网络协议和功能，如 TCP/IP 协议栈的完善和优化，为现代网络通信奠定了基础。像 FreeBSD 就因其强大的网络性能，常被用于构建网络服务器和防火墙等设备。</li>
<li><strong>开源与社区活跃</strong>：BSD 及其衍生版本大多采用开源的方式发布，拥有活跃的社区。社区成员积极参与开发和维护，不断为系统添加新功能、修复漏洞，使其技术不断更新和进步。</li>
<li><strong>可移植性高</strong>：BSD 具有良好的可移植性，能够在多种硬件平台上运行，包括 x86、PowerPC、ARM 等。这使得它可以广泛应用于不同类型的设备和系统中。</li>
</ul>
</li>
<li><strong>应用场景</strong>：BSD 及其衍生版本在服务器领域应用广泛，如 Web 服务器、邮件服务器等。此外，在嵌入式系统中也有大量应用，如网络设备、智能家居等。</li>
</ul>
<p><strong>System V</strong></p>
<ul>
<li><strong>起源与发展</strong>：System V 是 AT&amp;T 开发的 Unix 版本，它在 Unix 的发展中也占据着重要地位。System V 经历了多个版本的发展，如 System V Release 4 等，对 Unix 的标准化和商业化起到了重要推动作用。</li>
<li>特点
<ul>
<li><strong>系统架构稳定</strong>：System V 具有一套相对稳定和成熟的系统架构，其进程管理、内存管理等核心功能的设计较为完善，为系统的稳定性和可靠性提供了保障。许多商业 Unix 系统都基于 System V 进行开发。</li>
<li><strong>标准化程度高</strong>：System V 在 Unix 的标准化方面做出了重要贡献，它定义了一系列的系统接口和规范，如 System V IPC（进程间通信）机制等，这些规范成为了后来许多 Unix 系统和类 Unix 系统遵循的标准。</li>
<li><strong>商业应用广泛</strong>：由于其稳定性和标准化，System V 在商业领域得到了广泛应用。许多大型企业和机构选择基于 System V 的 Unix 系统来运行关键业务应用，如银行系统、企业资源规划（ERP）系统等。</li>
</ul>
</li>
<li><strong>应用场景</strong>：主要应用于商业环境中的关键任务系统，如大型企业的核心业务系统、金融交易系统等。同时，在一些对系统稳定性和兼容性要求较高的科研、政府等领域也有应用。</li>
</ul>
<hr>
<p><br><br><br></p>
<h2 id="certificate-证书">certificate 证书</h2>
<ol>
<li><strong>Linux 系统中的证书位置</strong></li>
</ol>
<p>在 Linux 系统中，根证书和信任的证书通常存储在以下目录中：</p>
<ul>
<li>
<p><strong>根证书存储路径</strong>：</p>
<ul>
<li><code>/etc/ssl/certs/</code></li>
<li><code>/usr/share/ca-certificates/</code>（某些发行版）</li>
<li><code>/etc/pki/tls/certs/</code>（某些发行版，如 RedHat/CentOS）</li>
</ul>
</li>
<li>
<p><strong>管理证书</strong>：</p>
<ul>
<li><strong><code>ca-certificates</code></strong> 软件包通常用于管理信任的根证书。</li>
<li>使用 <code>update-ca-certificates</code> 命令来更新系统证书库。</li>
</ul>
</li>
<li>
<p><strong>验证证书内容</strong>：</p>
<p>您可以通过 <code>openssl</code> 命令查看该证书的详细信息，确认它是否是 <strong>USERTrust RSA Certification Authority</strong> 根证书。运行以下命令：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">openssl x509 -<span class="hljs-keyword">in</span> USERTrust_RSA_Certification_Authority.pem -text -noout<br></code></pre></td></tr></table></figure>
<p>这将显示证书的详细信息，其中包括：</p>
<ul>
<li><strong>Issuer</strong>：应为 <code>USERTrust RSA Certification Authority</code>。</li>
<li><strong>Subject</strong>：通常会显示证书本身的标识信息。</li>
</ul>
</li>
<li>
<p><strong>安装证书</strong>：</p>
<ul>
<li>
<p>将 <code>.pem</code> 格式的证书文件拷贝到 <code>/usr/local/share/ca-certificates/</code> 目录，然后运行以下命令：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo update-ca-certificates<br></code></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<br>
<ol start="2">
<li><strong>macOS 系统中的证书位置</strong></li>
</ol>
<p>在 <strong>macOS</strong> 中，根证书存储在 <strong>钥匙串访问</strong>（Keychain Access）中。您可以通过 <strong>钥匙串访问</strong> 查看和管理根证书。</p>
<ul>
<li>
<p><strong>证书存储位置</strong>：</p>
<ul>
<li><strong>系统钥匙串</strong>（System Keychain）：存储系统信任的根证书。</li>
<li><strong>用户钥匙串</strong>（Login Keychain）：存储用户自己添加或信任的证书。</li>
</ul>
</li>
<li>
<p><strong>查看证书</strong>：</p>
<ul>
<li>打开 <strong>钥匙串访问</strong>（Keychain Access），选择 <strong>系统根证书</strong>（System Roots），查看所有受信任的证书。</li>
</ul>
</li>
<li>
<p><strong>安装证书</strong>：</p>
<ul>
<li>将证书拖动到 <strong>钥匙串访问</strong> 中，或双击证书文件，系统会提示是否安装该证书。</li>
</ul>
</li>
</ul>
<hr>
<p><br><br><br></p>
<h2 id="dig">dig</h2>
<p><code>dig</code> 命令是一个用于查询 DNS（域名系统）信息的工具，主要用于测试和诊断域名解析问题。它可以获取域名的 IP 地址、MX 记录、NS 记录、TTL 值等详细信息。以下是关于 <code>dig</code> 命令的详细介绍：</p>
<br>
<p><strong>基本用途</strong></p>
<ul>
<li>查询域名对应的 IP 地址（A 记录）。</li>
<li>反向查询 IP 对应的域名（PTR 记录）。</li>
<li>获取 DNS 服务器返回的权威信息（如 NS 记录、SOA 记录）。</li>
<li>诊断 DNS 解析过程中的错误或异常。</li>
</ul>
<br>
<p><strong>基本语法</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">dig [选项] [域名] [查询类型]<br></code></pre></td></tr></table></figure>
<ul>
<li><strong>选项</strong>：控制查询行为（如指定 DNS 服务器、显示详细信息等）。</li>
<li><strong>域名</strong>：需要查询的目标域名（如 <code>example.com</code>）。</li>
<li><strong>查询类型</strong>：可选值包括 <code>A</code>（IP 地址）、<code>MX</code>（邮件交换记录）、<code>NS</code>（名称服务器）、<code>TXT</code>（文本记录）等。</li>
</ul>
<br>
<p><strong>常用选项及示例</strong></p>
<ol>
<li>
<p><strong>查询默认记录（A 记录）</strong></p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">dig example.com<br></code></pre></td></tr></table></figure>
<p>输出结果中包含 <code>ANSWER SECTION</code>，显示域名对应的 IP 地址。</p>
</li>
<li>
<p><strong>指定查询类型</strong></p>
<ul>
<li>
<p>查询 MX 记录</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">dig mx example.com<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>查询 NS 记录</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">dig ns example.com<br></code></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p><strong>反向查询（IP 转域名）</strong></p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">dig -x 192.168.1.1<br></code></pre></td></tr></table></figure>
<p>输出结果显示该 IP 对应的 PTR 记录（如果存在）。</p>
</li>
<li>
<p><strong>指定 DNS 服务器</strong></p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">dig @8.8.8.8 example.com<br></code></pre></td></tr></table></figure>
<p>使用 Google DNS（8.8.8.8）查询 <code>example.com</code> 的信息。</p>
</li>
<li>
<p><strong>显示所有记录</strong></p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">dig any example.com<br></code></pre></td></tr></table></figure>
<p>获取域名的所有 DNS 记录（A、MX、NS、TXT 等）。</p>
</li>
<li>
<p><strong>简化输出</strong></p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">dig +short example.com<br></code></pre></td></tr></table></figure>
<p>仅显示查询结果的关键信息（如 IP 地址）。</p>
</li>
</ol>
<br>
<p><strong>输出结果说明</strong></p>
<p><code>dig</code> 的输出通常包含以下部分：</p>
<ul>
<li><strong>HEADER</strong>：查询的基本信息（如查询状态、查询时间）。</li>
<li><strong>QUESTION SECTION</strong>：查询的域名和类型。</li>
<li><strong>ANSWER SECTION</strong>：查询结果（如 IP 地址、MX 优先级）。</li>
<li><strong>AUTHORITY SECTION</strong>：提供权威解析的 DNS 服务器。</li>
<li><strong>ADDITIONAL SECTION</strong>：附加信息（如 DNS 服务器的 IP 地址）。</li>
</ul>
<br>
<p><strong>注意事项</strong></p>
<ol>
<li><strong>权限问题</strong>：某些查询可能需要管理员权限（使用 <code>sudo</code>）。</li>
<li><strong>参数中的特殊字符</strong>：如果域名包含特殊字符（如 <code>_</code>），需用引号包裹。</li>
<li><strong>与 <code>nslookup</code> 的区别</strong>：<code>dig</code> 是更强大的 DNS 诊断工具，而 <code>nslookup</code> 功能相对简单。</li>
</ol>
<br>
<p><strong>示例</strong></p>
<ul>
<li>
<p>查询 <code>baidu.com</code> 的 IP 地址：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">dig baidu.com<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>查询 <code>qq.com</code> 的 MX 记录：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">dig mx qq.com<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>反向查询 IP <code>202.108.22.5</code> 的域名：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">dig -x 202.108.22.5<br></code></pre></td></tr></table></figure>
</li>
</ul>
<p>通过 <code>dig</code> 命令，用户可以深入分析 DNS 解析过程，解决域名解析失败、记录配置错误等问题。</p>
<hr>
<p><br><br><br></p>
<h2 id="file">file</h2>
<p><strong>查看文件类型（文本、二进制、符号链接等）</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">file 文件名<br><span class="hljs-comment"># 示例：查看 /bin/bash 的类型</span><br>file /bin/bash<br></code></pre></td></tr></table></figure>
<p>输出示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">/bin/bash: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, for GNU/Linux 3.2.0, BuildID[sha1]=...<br></code></pre></td></tr></table></figure>
<hr>
<p><br><br><br></p>
<h2 id="lsof">lsof</h2>
<p><code>lsof</code> 即 “list open files”，用于查看系统中被打开的文件，由于在 Unix 中一切皆文件，所以它也能查看网络连接、进程打开的文件等多种信息。</p>
<p><strong>命令语法</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">lsof [选项] [参数]<br></code></pre></td></tr></table></figure>
<br>
<p><strong>常用选项及示例</strong></p>
<table>
<thead>
<tr>
<th>选项</th>
<th>含义</th>
<th>示例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-i</code></td>
<td>显示所有网络连接相关的文件，可搭配端口号、协议等使用</td>
<td><code>lsof -i</code>：显示所有网络连接信息 <code>lsof -i :8080</code>：显示占用 8080 端口的网络连接信息 <code>lsof -i TCP:80</code>：显示占用 TCP 80 端口的网络连接信息</td>
</tr>
<tr>
<td><code>-p</code></td>
<td>根据进程 ID（PID）查看该进程打开的文件</td>
<td><code>lsof -p 1234</code>：查看 PID 为 1234 的进程打开的所有文件</td>
</tr>
<tr>
<td><code>-u</code></td>
<td>根据用户查看该用户打开的文件</td>
<td><code>lsof -u root</code>：查看 root 用户打开的所有文件</td>
</tr>
<tr>
<td><code>-c</code></td>
<td>根据命令名查看该命令对应的进程打开的文件</td>
<td><code>lsof -c nginx</code>：查看 nginx 进程打开的所有文件</td>
</tr>
<tr>
<td><code>-d</code></td>
<td>指定要查看的文件描述符</td>
<td><code>lsof -d 0,1,2</code>：查看文件描述符为 0（标准输入）、1（标准输出）、2（标准错误输出）的文件信息</td>
</tr>
</tbody>
</table>
<br>
<p><strong>输出字段解释</strong></p>
<table>
<thead>
<tr>
<th>字段</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>COMMAND</code></td>
<td>进程对应的命令名称</td>
</tr>
<tr>
<td><code>PID</code></td>
<td>进程的 ID</td>
</tr>
<tr>
<td><code>USER</code></td>
<td>进程的所有者</td>
</tr>
<tr>
<td><code>FD</code></td>
<td>文件描述符，用于标识文件或网络连接，如 cwd（当前工作目录）、txt（程序代码）、mem（内存映射文件）、IPv4/IPv6（网络连接）等</td>
</tr>
<tr>
<td><code>TYPE</code></td>
<td>文件类型，如 DIR（目录）、REG（普通文件）、CHR（字符设备）、BLK（块设备）、FIFO（命名管道）、SOCK（套接字）等</td>
</tr>
<tr>
<td><code>DEVICE</code></td>
<td>设备号</td>
</tr>
<tr>
<td><code>SIZE/OFF</code></td>
<td>文件大小或偏移量</td>
</tr>
<tr>
<td><code>NODE</code></td>
<td>文件的索引节点号</td>
</tr>
<tr>
<td><code>NAME</code></td>
<td>文件或网络连接的名称</td>
</tr>
</tbody>
</table>
<br>
<p><strong>常见应用场景</strong></p>
<ol>
<li><strong>查找占用端口的进程</strong>：当启动服务时提示端口被占用，使用 <code>lsof -i :端口号</code> 可快速找到占用该端口的进程及对应的 PID，然后可使用 <code>kill -9 PID</code> 终止该进程。</li>
<li><strong>排查文件被哪些进程占用</strong>：如要删除某个文件但提示被占用，使用 <code>lsof 文件名</code> 能找出占用该文件的进程。</li>
<li><strong>监控特定用户或进程的文件操作</strong>：通过 <code>-u</code> 和 <code>-p</code> 选项可监控指定用户或进程打开的文件，了解其操作行为。</li>
</ol>
<br>
<p><strong>注意事项</strong></p>
<ul>
<li><code>lsof</code> 命令需要较高的权限来查看系统中所有进程的信息，通常需要使用 <code>sudo</code> 来执行。</li>
<li>输出信息较多时，可结合 <code>grep</code> 命令进行过滤，如 <code>lsof -i | grep 8080</code> 只显示包含 8080 端口的信息。</li>
</ul>
<hr>
<p><br><br><br></p>
<h2 id="openssl-s-client">openssl s_client</h2>
<p><strong><code>openssl s_client</code> 命令的作用</strong></p>
<p><code>openssl s_client</code> 是一个用于测试和调试 SSL/TLS 连接的工具，它允许您与远程服务器建立 SSL/TLS 连接，并查看服务器返回的证书链、加密算法以及其他 SSL/TLS 协议信息。</p>
<br>
<p><strong>命令的常用语法：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">openssl s_client -connect &lt;host&gt;:&lt;port&gt; -showcerts<br></code></pre></td></tr></table></figure>
<ul>
<li><strong><code>-connect &lt;host&gt;:&lt;port&gt;</code></strong>：指定要连接的远程服务器和端口（例如 <code>api.push.apple.com:443</code>）。</li>
<li><strong><code>-showcerts</code></strong>：显示服务器返回的完整证书链。</li>
</ul>
<br>
<p><strong><code>openssl s_client</code> 输出解读：</strong></p>
<ul>
<li><strong>Certificate chain</strong>：显示服务器返回的证书链，包含服务器证书、中间证书和根证书。</li>
<li><strong>SSL handshake</strong>：显示 SSL/TLS 握手过程中的详细信息。</li>
<li><strong>Verification</strong>：显示证书验证结果，通常为 <code>Verification: OK</code>，表示证书验证成功。</li>
<li><strong>Server certificate</strong>：显示服务器证书的详细信息，包括证书颁发者、有效期、主题等。</li>
<li><strong>Cipher</strong>：显示所使用的加密算法。</li>
</ul>
<br>
<p><strong>示例：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">openssl s_client -connect api.push.apple.com:443 -showcerts<br></code></pre></td></tr></table></figure>
<p>此命令将连接到 <code>api.push.apple.com</code> 服务器的 443 端口（HTTPS），并显示其证书链。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">guowei.gong@GJVXWHGXQ1 ~ % openssl s_client -connect api.push.apple.com:443 -showcerts<br><br>Connecting to 17.188.180.78<br>CONNECTED(00000006)<br>depth=2 C=GB, ST=Greater Manchester, L=Salford, O=Comodo CA Limited, CN=AAA Certificate Services<br>verify return:1<br>depth=1 CN=Apple Public Server RSA CA 12 - G1, O=Apple Inc., ST=California, C=US<br>verify return:1<br>depth=0 C=US, ST=California, O=Apple Inc., CN=api.push.apple.com<br>verify return:1<br>---<br>Certificate chain<br> 0 s:C=US, ST=California, O=Apple Inc., CN=api.push.apple.com<br>   i:CN=Apple Public Server RSA CA 12 - G1, O=Apple Inc., ST=California, C=US<br>   a:PKEY: rsaEncryption, 2048 (bit); sigalg: RSA-SHA256<br>   v:NotBefore: Jun 19 16:31:31 2024 GMT; NotAfter: Apr 10 00:00:00 2025 GMT<br>-----BEGIN CERTIFICATE-----<br>MIIHqjCCBpKgAwIBAgIQKiA7SuAYHNdvnlNP26uvTDANBgkqhkiG9w0BAQsFADBk<br>MSswKQYDVQQDEyJBcHBsZSBQdWJsaWMgU2VydmVyIFJTQSBDQSAxMiAtIEcxMRMw<br>EQYDVQQKEwpBcHBsZSBJbmMuMRMwEQYDVQQIEwpDYWxpZm9ybmlhMQswCQYDVQQG<br>EwJVUzAeFw0yNDA2MTkxNjMxMzFaFw0yNTA0MTAwMDAwMDBaMFQxCzAJBgNVBAYT<br>AlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMRMwEQYDVQQKDApBcHBsZSBJbmMuMRsw<br>GQYDVQQDDBJhcGkucHVzaC5hcHBsZS5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IB<br>DwAwggEKAoIBAQDdTItGsYBuFOd8MtrkwpLbUB0Oxt4vZFPEbuLzuNj0ZISbGfV7<br>Hbde6MUsSwe/Z9EqktYlayPvjwlqXdarBd1FuhJDz6S+KvI7Ib2pDqBAJc2yTesM<br>cd8NkAzgPDUEUPtfXjSQOG/NkkMS9lETbq+xijFVo67J31PpM2w7i7o7LPmDYslO<br>Ja94h6PSUNj6jvKXfBn7PDLuDPNkeGOmBabnmHO/7CIrMOI6nxdOPuE1tsZ2GrmC<br>GOFxHZXRVuSgkEeqtucMqEIerODJl2kCzzb/udem6cm2RW9KjvRDnVaMaK8xvLR8<br>95iCtvTCR9sMDalSTHPVQQztVBhsBXLV1hc9AgMBAAGjggRmMIIEYjAMBgNVHRMB<br>Af8EAjAAMB8GA1UdIwQYMBaAFB5cF5EFVwL8d1zjcEPsa/3d0thpMHgGCCsGAQUF<br>BwEBBGwwajAxBggrBgEFBQcwAoYlaHR0cDovL2NlcnRzLmFwcGxlLmNvbS9hcHNy<br>c2ExMmcxLmRlcjA1BggrBgEFBQcwAYYpaHR0cDovL29jc3AuYXBwbGUuY29tL29j<br>c3AwMy1hcHNyc2ExMmcxMDEwgcoGA1UdEQSBwjCBv4ISYXBpLnB1c2guYXBwbGUu<br>Y29tghVtci1hcGkucHVzaC5hcHBsZS5jb22CGGFwaS1jYXJyeS5wdXNoLmFwcGxl<br>LmNvbYIVbXMtYXBpLnB1c2guYXBwbGUuY29tghVwdi1hcGkucHVzaC5hcHBsZS5j<br>b22CFWFwaS1jbi5wdXNoLmFwcGxlLmNvbYIVc3QtYXBpLnB1c2guYXBwbGUuY29t<br>ghxhcGktYnJvYWRjYXN0LnB1c2guYXBwbGUuY29tMGIGA1UdIARbMFkwSQYGZ4EM<br>AQICMD8wPQYIKwYBBQUHAgEWMWh0dHBzOi8vd3d3LmFwcGxlLmNvbS9jZXJ0aWZp<br>Y2F0ZWF1dGhvcml0eS9wdWJsaWMwDAYKKoZIhvdjZAULBDATBgNVHSUEDDAKBggr<br>BgEFBQcDATA0BgNVHR8ELTArMCmgJ6AlhiNodHRwOi8vY3JsLmFwcGxlLmNvbS9h<br>cHNyc2ExMmcxLmNybDAdBgNVHQ4EFgQU1ChZXxquxdC6SoKXhFmtc8t7llQwDgYD<br>VR0PAQH/BAQDAgWgMA8GCSqGSIb3Y2QGVgQCBQAwggH5BgorBgEEAdZ5AgQCBIIB<br>6QSCAeUB4wB3AH1ZHhLheCp7HGFnfF79+NCHXBSgTpWeuQMv2Q6MLnm4AAABkDFf<br>+coAAAQDAEgwRgIhAObiA+oBZXYO156kx74zGTaxDS4avyk6jYXtk9vHcujWAiEA<br>8keKJMIyXyIhMB4UFhEtRduzUL6ujSByT5uy7JirqaIAdgDM+w9qhXEJZf6Vm1PO<br>6bJ8IumFXA2XjbapflTA/kwNsAAAAZAxX/nBAAAEAwBHMEUCIQDkcmAG21vPbAJu<br>tpcff+8jo/VsVRMEc1Jgf1QOmXwlIwIgShPedMQXRAPnHQ+KhG5eWGnEf7m/PH7o<br>xhW5gjcnZi8AdwCi4wrkRe+9rZt+OO1HZ3dT14JbhJTXK14bLMS5UKRH5wAAAZAx<br>X/oiAAAEAwBIMEYCIQDKpKC72rD2spVQtsNTCjpOEsqoJ7EhNiirziuxOblx5AIh<br>AOjQmwTFcqXyIQ3eOGeLHlsyJnbU7A6ggfku942tgm1qAHcATnWjJ1yaEMM4W2zU<br>3z9S6x3w4I4bjWnAsfpksWKaOd8AAAGQMV/5rwAABAMASDBGAiEAscBazkEk2Wgt<br>6stYO3hoyEIS92P3evwIO2ttt4x4eGMCIQCMLK5TZTVQ0+V+lhMiTIR73P546FXe<br>AFYuxlI2EsStPDANBgkqhkiG9w0BAQsFAAOCAQEAoJhiEnrwyGZSzjn0FH+vnQY/<br>t7u6p75wY/W/7RJ0ed4fPywLYo7U4BnSVVHuM6Zfb4DRqZe8DQ4Nw2u1uMNUbJlU<br>6YQkg7j+URWNzkOJVc2cuSgsaCY3ECCXQmWQGbZmHLlGUTMw5rP24PJekCvweuNs<br>GY086vOrireKtvs62g0i33c3wMo0PsobT0RViH3vJGh0/qkUqsY8tV14y7AlmiHD<br>aAI4bLWP3VlbPdelu8idp+XnGXd/QEgkxfG9AwwFex5FmhCloky5v0WTvioC4kfy<br>SMqIuLsBnWgk+wKk2CRXK6Xa65rbPVXo3RR4OSDn7skPF7epAOtqATzFJeO3Mw==<br>-----END CERTIFICATE-----<br> 1 s:CN=Apple Public Server RSA CA 12 - G1, O=Apple Inc., ST=California, C=US<br>   i:C=GB, ST=Greater Manchester, L=Salford, O=Comodo CA Limited, CN=AAA Certificate Services<br>   a:PKEY: rsaEncryption, 2048 (bit); sigalg: RSA-SHA256<br>   v:NotBefore: Jun 19 00:00:00 2019 GMT; NotAfter: Dec  6 23:59:59 2028 GMT<br>-----BEGIN CERTIFICATE-----<br>MIIEkDCCA3igAwIBAgIQCuSPIwEwZEGSWeHCmumNGDANBgkqhkiG9w0BAQsFADB7<br>MQswCQYDVQQGEwJHQjEbMBkGA1UECAwSR3JlYXRlciBNYW5jaGVzdGVyMRAwDgYD<br>VQQHDAdTYWxmb3JkMRowGAYDVQQKDBFDb21vZG8gQ0EgTGltaXRlZDEhMB8GA1UE<br>AwwYQUFBIENlcnRpZmljYXRlIFNlcnZpY2VzMB4XDTE5MDYxOTAwMDAwMFoXDTI4<br>MTIwNjIzNTk1OVowZDErMCkGA1UEAxMiQXBwbGUgUHVibGljIFNlcnZlciBSU0Eg<br>Q0EgMTIgLSBHMTETMBEGA1UEChMKQXBwbGUgSW5jLjETMBEGA1UECBMKQ2FsaWZv<br>cm5pYTELMAkGA1UEBhMCVVMwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIB<br>AQC9vhI3XrifeRWYC+x6U5sPCaYAPncBLBBsyQdt7ztiyROEG6fEKZG1tToZMES3<br>jtgqV+7RcBV9xX2jVeU+EwAnHkIpwoDWcte0gLfALL3hkVcwXJoJaojVF8mMHlJt<br>QYTr3FYkZ6FqALt/LFUxeis3/Zgtug7EoqBsZeF5g79lSZtZqcNLm+3NuvZUdAHB<br>GIzD++wVlOhy9IxahD/Z7eIkpuJTedYVpLmnX/fHq92gYoNHezlNN8vdILlsPV4k<br>IdrwTKso7II25Kha0/l3hx2xEBtUIQLMGxKF+fD9AjcYhSMqhTM5/2tyud4QJxIy<br>409Dj4OhNooHAxurBDHwV8ZlAgMBAAGjggElMIIBITAfBgNVHSMEGDAWgBSgEQoj<br>PpbxB+zirynvgqV/0DCktDAdBgNVHQ4EFgQUHlwXkQVXAvx3XONwQ+xr/d3S2Gkw<br>DgYDVR0PAQH/BAQDAgGGMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAh<br>BgNVHSAEGjAYMAwGCiqGSIb3Y2QFCwQwCAYGZ4EMAQICMBIGA1UdEwEB/wQIMAYB<br>Af8CAQAwQwYDVR0fBDwwOjA4oDagNIYyaHR0cDovL2NybC5jb21vZG9jYS5jb20v<br>QUFBQ2VydGlmaWNhdGVTZXJ2aWNlcy5jcmwwNAYIKwYBBQUHAQEEKDAmMCQGCCsG<br>AQUFBzABhhhodHRwOi8vb2NzcC5jb21vZG9jYS5jb20wDQYJKoZIhvcNAQELBQAD<br>ggEBAGa7XPTd+1lgnT/dDf2agLAIIXpbTn6XtEGMq9jovXbK076zHlQSWapd6Zd/<br>p/uWydwuTbd+cobkUTFZhKGMkY0e8gXgI2s09kQ0EfotFUOdQ7qf1U+UM7JIEZmD<br>gsTn9vBLNwbtwH9t6cvYxH//VhWyL07pPkfTFBVqvAprGZ9MgraZD2S9qYu9usfS<br>vuH4lr4b3NuZ7mh3zOs4aD3Omgx30DU8DV82LikGN4/MF+uDOGgHtPv0ozlvPrFc<br>8bsE+lTnjP199w5X+kPtpzrkjYPNrGxTg4nhugo6y+GPOCl00S+T/794oTq/HFlj<br>6IoOvOR7UaKo39qnYwA6Fs0F0to=<br>-----END CERTIFICATE-----<br>---<br>Server certificate<br>subject=C=US, ST=California, O=Apple Inc., CN=api.push.apple.com<br>issuer=CN=Apple Public Server RSA CA 12 - G1, O=Apple Inc., ST=California, C=US<br>---<br>Acceptable client certificate CA names<br>C=US, O=Apple Inc., OU=Apple Certification Authority, CN=Apple Root CA<br>CN=Apple Worldwide Developer Relations Certification Authority, OU=G4, O=Apple Inc., C=US<br>CN=Apple Application Integration 2 Certification Authority, OU=Apple Certification Authority, O=Apple Inc., C=US<br>CN=Apple Corporate Authentication CA 1, OU=Certification Authority, O=Apple Inc., C=US<br>C=US, O=Apple Inc., OU=Apple Worldwide Developer Relations, CN=Apple Worldwide Developer Relations Certification Authority<br>CN=Apple Corporate Root CA, OU=Certification Authority, O=Apple Inc., C=US<br>C=US, O=Apple Inc., OU=Apple Certification Authority, CN=Apple Application Integration Certification Authority<br>Requested Signature Algorithms: ECDSA+SHA256:RSA-PSS+SHA256:RSA+SHA256:ECDSA+SHA384:RSA-PSS+SHA384:RSA+SHA384:RSA-PSS+SHA512:RSA+SHA512:RSA+SHA1<br>Shared Requested Signature Algorithms: ECDSA+SHA256:RSA-PSS+SHA256:RSA+SHA256:ECDSA+SHA384:RSA-PSS+SHA384:RSA+SHA384:RSA-PSS+SHA512:RSA+SHA512<br>Peer signing digest: SHA256<br>Peer signature type: RSA-PSS<br>Server Temp Key: X25519, 253 bits<br>---<br>SSL handshake has read 4564 bytes and written 439 bytes<br>Verification: OK<br>---<br>New, TLSv1.3, Cipher is TLS_AES_256_GCM_SHA384<br>Protocol: TLSv1.3<br>Server public key is 2048 bit<br>This TLS version forbids renegotiation.<br>Compression: NONE<br>Expansion: NONE<br>No ALPN negotiated<br>Early data was not sent<br>Verify return code: 0 (ok)<br>---<br>---<br>Post-Handshake New Session Ticket arrived:<br>SSL-Session:<br>    Protocol  : TLSv1.3<br>    Cipher    : TLS_AES_256_GCM_SHA384<br>    Session-ID: C54814B61097CB6335B6AD6CCDEF4B3AAC14754BF85C03C056B33A188BD1D07B<br>    Session-ID-ctx: <br>    Resumption PSK: A9674C3FDFF9E741D6345E090A4D12BACCED115D57AC1BE1797D1406702AE86D1D281E5D0F15AB10735F8F29A073FB4A<br>    PSK identity: None<br>    PSK identity hint: None<br>    SRP username: None<br>    TLS session ticket lifetime hint: 172800 (seconds)<br>    TLS session ticket:<br>    0000 - a5 8e ee fe 44 9d 87 ef-96 ac 2e a9 eb 89 64 d2   ....D.........d.<br>    0010 - bf 89 51 78 47 dd f8 4f-40 e9 42 04 57 65 70 2b   ..QxG..O@.B.Wep+<br>    0020 - 19 bb ec 0c 8e 43 ed e8-20 b0 55 c9 1c ab d5 c2   .....C.. .U.....<br>    0030 - f3 00 56 81 b9 10 70 fe-98 84 47 b7 e5 f3 4b 8a   ..V...p...G...K.<br>    0040 - f3 e9 09 72 7c 53 c9 df-d7 3e 97 7b 50 eb 80 8d   ...r|S...&gt;.&#123;P...<br>    0050 - 94 05 43 15 2a 3f 86 3b-b8 aa 0e 2e fd a6 16 aa   ..C.*?.;........<br>    0060 - ba 2a d3 68 cd cc 52 af-07 1c 5a 55 d2 9d 7c 90   .*.h..R...ZU..|.<br>    0070 - 13 a0 8b db 4c 46 a6 77-cd b1 bc 04 80 e9 9d 04   ....LF.w........<br>    0080 - 1e b4 78 eb 13 28 43 af-9a 4d 89 8e 82 3f 97 a1   ..x..(C..M...?..<br>    0090 - 36 e5 29 af f3 52 ef 0e-db 20 5b bf 43 d8 82 8a   6.)..R... [.C...<br>    00a0 - 8f 00 c8 69 4f f4 c0 19-c8 81 4c 4d 10 3d 73 6c   ...iO.....LM.=sl<br><br>    Start Time: 1737430470<br>    Timeout   : 7200 (sec)<br>    Verify return code: 0 (ok)<br>    Extended master secret: no<br>    Max Early Data: 0<br>---<br>read R BLOCK<br>---<br>Post-Handshake New Session Ticket arrived:<br>SSL-Session:<br>    Protocol  : TLSv1.3<br>    Cipher    : TLS_AES_256_GCM_SHA384<br>    Session-ID: 3733C569A0566154B52029C29BE0F7BF234BCA0F1BC90E8468CA3C6892FD7E0B<br>    Session-ID-ctx: <br>    Resumption PSK: 0FE6D0700E5F948E1EB061CEB86C8B4F6ACA65EF778D8EDCCFB9D2148F5AEBD9780BDA752099A9503DD7E769D94E5B58<br>    PSK identity: None<br>    PSK identity hint: None<br>    SRP username: None<br>    TLS session ticket lifetime hint: 172800 (seconds)<br>    TLS session ticket:<br>    0000 - a5 8e ee fe 44 9d 87 ef-96 ac 2e a9 eb 89 64 d2   ....D.........d.<br>    0010 - 88 a5 e7 e8 f1 c4 65 1e-62 c5 c0 1d 75 ad a4 ba   ......e.b...u...<br>    0020 - 99 95 43 96 da 48 3b cd-48 c0 61 0e 89 e9 f3 5e   ..C..H;.H.a....^<br>    0030 - 9e d0 2c 20 18 69 4f a3-e2 88 26 86 be cc b3 35   .., .iO...&amp;....5<br>    0040 - a5 d9 86 f1 d1 8c 48 9e-25 7e 37 09 6c e4 9b 51   ......H.%~7.l..Q<br>    0050 - a2 c3 37 44 0d df fe 8b-5d 9a 1b 46 58 06 6d 92   ..7D....]..FX.m.<br>    0060 - 10 a1 52 bb ed 58 ca d4-ac 8f 62 a8 f9 a5 31 66   ..R..X....b...1f<br>    0070 - a4 d4 df 46 7b f4 84 5b-f4 e3 32 f7 04 66 fd 0c   ...F&#123;..[..2..f..<br>    0080 - 79 92 f3 d1 5d 11 3e 4b-f5 27 f8 28 9b 36 5f 30   y...].&gt;K.&#x27;.(.6_0<br>    0090 - 19 ff 65 58 43 74 c7 2c-0c 35 47 38 ed fa 46 b4   ..eXCt.,.5G8..F.<br>    00a0 - 6a 52 81 6f 68 90 ae 5d-1e 28 8d 3d 91 94 cd 46   jR.oh..].(.=...F<br><br>    Start Time: 1737430470<br>    Timeout   : 7200 (sec)<br>    Verify return code: 0 (ok)<br>    Extended master secret: no<br>    Max Early Data: 0<br>---<br>read R BLOCK<br>@@<br></code></pre></td></tr></table></figure>
<details class="toggle" style="border: 1px solid  #edf4ee"><summary class="toggle-button" style="background-color:  #edf4ee;color:  #17181a">命令结果分析方法 </summary><div class="toggle-content"><p>执行 <code>openssl s_client -connect api.push.apple.com:443 -showcerts</code> 命令后，你会得到服务器的 SSL/TLS 连接详细信息以及证书链的输出。以下是如何解读该命令的结果：</p>
<br>
<ol>
<li>连接信息</li>
</ol>
<p>输出的开头部分会显示与服务器建立连接的情况，类似于：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">CONNECTED(00000003)<br></code></pre></td></tr></table></figure>
<p>这表示成功连接到目标主机的 443 端口（HTTPS 默认端口）。</p>
<br>
<ol start="2">
<li>证书链</li>
</ol>
<p>接下来，命令会显示服务器证书以及中间证书的详细信息（如果有）。<code>-showcerts</code> 选项会打印出所有证书，包括服务器证书和任何中间证书。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">-----BEGIN CERTIFICATE-----<br>MIIDdzCCAl+gAwIBAgIEbH1ETjANBgkqhkiG9w0BAQsFADCBhDELMAkGA1UEBhMC...<br>-----END CERTIFICATE-----<br></code></pre></td></tr></table></figure>
<p>每个证书段之间是 <code>-----BEGIN CERTIFICATE-----</code> 和 <code>-----END CERTIFICATE-----</code>，它们表示证书的开始和结束。</p>
<br>
<ol start="3">
<li>证书的验证信息</li>
</ol>
<p>每个证书都包含验证的层级。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">depth=2 C=GB, ST=Greater Manchester, L=Salford, O=Comodo CA Limited, CN=AAA Certificate Services<br>verify return:1<br>depth=1 CN=Apple Public Server RSA CA 12 - G1, O=Apple Inc., ST=California, C=US<br>verify return:1<br>depth=0 C=US, ST=California, O=Apple Inc., CN=api.push.apple.com<br>verify return:1<br></code></pre></td></tr></table></figure>
<p>这里的 <code>depth</code> 是证书链的层级（<code>depth=0</code> 是服务器证书，<code>depth=1</code> 是中间证书，<code>depth=2</code> 是根证书）。<code>verify return:1</code> 表示验证成功。</p>
<br>
<ol start="4">
<li>SSL/TLS 握手</li>
</ol>
<p>在连接建立之后，接下来会显示关于 SSL/TLS 握手的详细信息，类似于：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">SSL handshake has read 4564 bytes and written 439 bytes<br></code></pre></td></tr></table></figure>
<p>这部分显示了 SSL/TLS 握手中读写的字节数。</p>
<br>
<ol start="5">
<li>证书有效性验证</li>
</ol>
<p>如果服务器的证书经过了正确的验证并且是可信的，输出会显示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">Verify return code: 0 (ok)<br></code></pre></td></tr></table></figure>
<p>这意味着证书被成功验证，没有问题。如果验证失败，返回的错误码会更高，例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">Verify return code: 18 (self signed certificate)<br></code></pre></td></tr></table></figure>
<p><code>Verify return code: 18</code> 表示证书是自签名证书，因此无法通过公共证书颁发机构的验证。</p>
<br>
<ol start="6">
<li>加密算法和密钥交换信息</li>
</ol>
<p>输出中还会包含与加密算法、密钥交换算法相关的信息。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">Cipher    : TLS_AES_256_GCM_SHA384<br></code></pre></td></tr></table></figure>
<p>这里的 <code>Cipher</code> 是当前会话使用的加密套件，表示加密通信的具体算法。</p>
<br>
<ol start="7">
<li>握手和证书验证通过</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">---<br>SSL handshake has read 4564 bytes and written 439 bytes<br>Verification: OK<br>---<br></code></pre></td></tr></table></figure>
<ul>
<li><strong>SSL handshake has read 4564 bytes and written 439 bytes</strong>： 这表示在 SSL/TLS 握手过程中，客户端与服务器之间交换了数据。<code>read 4564 bytes</code> 表示客户端从服务器读取了 4564 字节的数据（包括证书和其他握手消息），<code>written 439 bytes</code> 表示客户端发送了 439 字节的数据（包括客户端的证书请求、加密参数等）。</li>
<li><strong>Verification: OK</strong>： 这一行表示证书验证通过，即客户端成功验证了服务器的证书，包括验证证书的签名、有效期、颁发机构（CA）等信息。如果验证失败，这里会显示相关的错误信息或警告。</li>
</ul>
<br>
<p>总结</p>
<ul>
<li><strong>CONNECTED</strong>：显示连接状态。</li>
<li><strong>证书链</strong>：显示服务器证书和中间证书。</li>
<li><strong>验证信息</strong>：证书的验证过程，查看是否通过验证。</li>
<li><strong>SSL/TLS 握手</strong>：有关握手过程的字节数。</li>
<li><strong>证书验证代码</strong>：显示证书的验证结果。</li>
<li><strong>加密套件</strong>：显示当前使用的加密套件。</li>
</ul>
<p>你可以通过这些信息来检查与服务器的 SSL/TLS 连接是否成功，以及证书的有效性。</p>
</div></details>
<hr>
<p><br><br><br></p>
<h2 id="port">port</h2>
<p><strong>端口号是传输层（TCP/IP 模型）的核心概念</strong>。以下是详细解释：</p>
<p><strong>一、端口号的本质</strong></p>
<ul>
<li><strong>传输层标识</strong>：<br>
端口号是传输层协议（如 TCP 或 UDP）的 “地址标签”，用于区分同一台主机上的不同应用进程。
<ul>
<li>例如：
<ul>
<li>浏览器通过 <code>TCP 80</code> 与 Web 服务器通信（HTTP 协议）。</li>
<li>邮件客户端通过 <code>TCP 25</code> 发送邮件（SMTP 协议）。</li>
</ul>
</li>
</ul>
</li>
<li><strong>协议独立性</strong>：<br>
TCP 和 UDP 的端口号是独立分配的。例如：
<ul>
<li><code>TCP 80</code> 和 <code>UDP 80</code> 是两个完全独立的端口。</li>
<li>Consul 的 <code>TCP 8301</code>（服务器通信）和 <code>UDP 8301</code>（Gossip 广播）就是典型例子。</li>
</ul>
</li>
</ul>
<br>
<p><strong>二、端口号的作用范围</strong></p>
<ul>
<li><strong>仅在传输层有效</strong>：<br>
端口号的作用仅限于传输层，与应用层协议无关。例如：
<ul>
<li>HTTP 协议默认使用 <code>TCP 80</code>，但也可以配置为其他端口（如 <code>TCP 8080</code>）。</li>
<li>即使 HTTP 使用 <code>TCP 8080</code>，它仍然是应用层协议，端口号仅用于传输层寻址。</li>
</ul>
</li>
<li><strong>OSI 模型对比</strong>：<br>
在 OSI 七层模型中，端口号属于<strong>传输层（第 4 层）</strong>，而 IP 地址属于<strong>网络层（第 3 层）</strong>。两者结合形成完整的网络地址（如 <code>IP:Port</code>）。</li>
</ul>
<br>
<p><strong>三、常见误解澄清</strong></p>
<ol>
<li>
<p><strong>“端口属于应用层”</strong></p>
<ul>
<li><strong>错误</strong>：应用层协议（如 HTTP、DNS）通常默认使用特定端口，但端口号本身由传输层管理。</li>
<li><strong>示例</strong>：DNS 协议既可以通过 <code>UDP 53</code>（查询）也可以通过 <code>TCP 53</code>（区域传输），这说明端口号与协议的绑定是灵活的。</li>
</ul>
</li>
<li>
<p><strong>“同一端口不能被不同协议使用”</strong></p>
<ul>
<li>
<p><strong>错误</strong>：同一端口号可以被不同协议的服务使用，只要它们属于不同的传输层协议（如 TCP 和 UDP）。</p>
</li>
<li>
<p>示例：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 同时存在TCP和UDP的8301端口</span><br>lsof -i :8301<br></code></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<br>
<p><strong>四、总结：端口号的关键属性</strong></p>
<table>
<thead>
<tr>
<th>特性</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>协议绑定</strong></td>
<td>每个端口号属于一个传输层协议（TCP 或 UDP），不同协议可复用同一端口号。</td>
</tr>
<tr>
<td><strong>作用范围</strong></td>
<td>仅在传输层有效，用于区分同一主机上的不同进程。</td>
</tr>
<tr>
<td><strong>动态分配</strong></td>
<td>1024-65535 为动态端口，可由应用程序随机选择。</td>
</tr>
<tr>
<td><strong>知名端口</strong></td>
<td>0-1023 为系统保留端口，用于 HTTP（80）、SSH（22）等标准服务。</td>
</tr>
</tbody>
</table>
<br>
<p><strong>五、实践意义</strong></p>
<ul>
<li><strong>避免端口冲突</strong>：部署服务时，需确保同一协议下的端口未被占用（如 <code>TCP 80</code> 已被 Web 服务器使用时，其他服务无法再绑定 <code>TCP 80</code>）。</li>
<li><strong>协议兼容性</strong>：若需复用端口号，可通过不同协议实现（如自定义服务使用 <code>UDP 8301</code>，与 Consul 的 <code>TCP 8301</code> 共存）。</li>
</ul>
<p>理解端口号的传输层本质，有助于正确配置网络服务、排查端口冲突，并设计高可用性的分布式系统（如 Consul 集群）。</p>
<hr>
<p><br><br><br></p>
<h2 id="ps">ps</h2>
<p><strong>1. 命令概述</strong></p>
<p><code>ps</code>（Process Status）用于查看当前系统中的进程状态。<br>
<strong>常用场景</strong>：监控进程资源占用、排查异常进程、终止进程等。</p>
<br>
<p><strong>2. 基本语法</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ps [选项]<br></code></pre></td></tr></table></figure>
<br>
<p><strong>3. 常用选项</strong></p>
<p><strong>BSD 风格选项</strong></p>
<table>
<thead>
<tr>
<th>选项</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-a</code></td>
<td>显示所有用户的进程（包括其他用户）。</td>
</tr>
<tr>
<td><code>-u</code></td>
<td>显示进程的详细信息（如用户、CPU 使用率、内存占用等）。</td>
</tr>
<tr>
<td><code>-x</code></td>
<td>显示没有控制终端的进程（如守护进程）。</td>
</tr>
<tr>
<td><code>-e</code></td>
<td>显示所有进程（等价于 <code>-A</code>）。</td>
</tr>
<tr>
<td><code>-f</code></td>
<td>显示完整格式的进程信息（包括父进程 ID、启动时间等）。</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">ps aux       <span class="hljs-comment"># 显示所有用户的进程及详细信息</span><br>ps -ef       <span class="hljs-comment"># 显示所有进程的完整格式信息</span><br></code></pre></td></tr></table></figure>
<p><strong>System V 风格选项</strong></p>
<table>
<thead>
<tr>
<th>选项</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-C</code></td>
<td>按命令名称过滤进程（如 <code>ps -C firefox</code>）。</td>
</tr>
<tr>
<td><code>-p</code></td>
<td>按 PID 过滤进程（如 <code>ps -p 1234</code>）。</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">ps -C sshd       <span class="hljs-comment"># 查看 SSH 服务进程</span><br>ps -p 1          <span class="hljs-comment"># 查看 PID 为 1 的进程（systemd）</span><br></code></pre></td></tr></table></figure>
<br>
<p><strong>4. 输出字段说明</strong></p>
<p>常用字段解释：</p>
<ul>
<li><strong>PID</strong>：进程 ID（唯一标识符）。</li>
<li><strong>USER</strong>：进程所有者。</li>
<li><strong>%CPU</strong>：CPU 使用率（百分比）。</li>
<li><strong>%MEM</strong>：内存使用率（百分比）。</li>
<li><strong>VSZ</strong>：虚拟内存大小（KB）。</li>
<li><strong>RSS</strong>：常驻内存大小（KB）。</li>
<li><strong>TTY</strong>：控制终端（<code>?</code> 表示无终端）。</li>
<li><strong>STAT</strong>：进程状态（如 <code>R</code> 运行中，<code>S</code> 睡眠中，<code>Z</code> 僵尸进程）。</li>
<li><strong>START</strong>：进程启动时间。</li>
<li><strong>TIME</strong>：累计 CPU 时间。</li>
<li><strong>COMMAND</strong>：启动进程的命令。</li>
</ul>
<br>
<p><strong>5. 高级用法</strong></p>
<p><strong>过滤与排序</strong></p>
<ul>
<li>
<p>过滤特定进程：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">ps aux | grep firefox  <span class="hljs-comment"># 查找 Firefox 相关进程</span><br>ps -ef | grep python   <span class="hljs-comment"># 查找 Python 进程</span><br></code></pre></td></tr></table></figure>
</li>
<li>
<p>按 CPU 使用率排序</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ps -eo pid,user,%cpu,%mem,<span class="hljs-built_in">command</span> --<span class="hljs-built_in">sort</span>=-%cpu  <span class="hljs-comment"># 降序排列</span><br></code></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>显示进程树</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ps -ejH  <span class="hljs-comment"># 以层级结构显示进程树</span><br></code></pre></td></tr></table></figure>
<br>
<p><strong>6. 常见问题</strong></p>
<ol>
<li>
<p><strong>如何终止进程？</strong><br>
结合 <code>kill</code> 命令：</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">kill</span> &lt;PID&gt;          <span class="hljs-comment"># 正常终止进程</span><br><span class="hljs-built_in">kill</span> -9 &lt;PID&gt;       <span class="hljs-comment"># 强制终止进程</span><br></code></pre></td></tr></table></figure>
</li>
<li>
<p><strong>实时监控进程？</strong><br>
使用 <code>top</code> 或 <code>htop</code> 命令。</p>
</li>
</ol>
<br>
<p><strong>7. 参考文档</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">man ps   <span class="hljs-comment"># 查看完整手册</span><br></code></pre></td></tr></table></figure>
<hr>
<p><br><br><br></p>
<h2 id="SS">SS</h2>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.koogua.com/article/139">https://www.koogua.com/article/139</a></p>
</blockquote>
<hr>
<p><br><br><br></p>
<h2 id="sudo-su">sudo &amp; su</h2>
<p><strong>一、核心区别总结</strong></p>
<table>
<thead>
<tr>
<th><strong>功能</strong></th>
<th><strong>sudo</strong></th>
<th><strong>su</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>切换方式</strong></td>
<td>临时以目标用户权限执行命令</td>
<td>完全切换到目标用户的 shell 会话</td>
</tr>
<tr>
<td><strong>生效范围</strong></td>
<td>仅当前终端的单次命令有效</td>
<td>所有后续操作均以目标用户身份执行</td>
</tr>
<tr>
<td><strong>环境变量</strong></td>
<td>默认继承当前用户的环境（可通过 <code>-i</code> 加载目标用户环境）</td>
<td>完全加载目标用户的环境（使用 <code>su -</code>）</td>
</tr>
<tr>
<td><strong>密码要求</strong></td>
<td>需要当前用户的密码（需 sudo 权限）</td>
<td>需要目标用户的密码（root 或普通用户）</td>
</tr>
<tr>
<td><strong>安全性</strong></td>
<td>更安全，仅允许执行特定命令</td>
<td>风险较高，直接获得目标用户的完全控制权</td>
</tr>
</tbody>
</table>
<br>
<p><strong>二、详细对比</strong></p>
<p><strong>1. 临时执行 vs 完全切换</strong></p>
<ul>
<li>
<p><strong>sudo</strong></p>
<ul>
<li>
<p>仅执行 <strong>单个命令</strong>，执行完毕后恢复原用户身份。</p>
</li>
<li>
<p>示例：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo -u user1 <span class="hljs-built_in">ls</span> /home/user1  <span class="hljs-comment"># 以 user1 身份执行 ls 命令，执行后仍为原用户</span><br></code></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p><strong>su</strong></p>
<ul>
<li>
<p>切换到目标用户的 <strong>完整 shell 会话</strong>，所有后续操作均以目标用户身份进行。</p>
</li>
<li>
<p>示例：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">su - user1  <span class="hljs-comment"># 切换到 user1 用户，需输入 user1 的密码，环境完全变更</span><br></code></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<p><strong>2. 环境变量继承</strong></p>
<ul>
<li>
<p><strong>sudo</strong></p>
<ul>
<li>
<p>默认继承当前用户的环境变量（如 <code>PATH</code>、<code>HOME</code>）。</p>
</li>
<li>
<p>若需加载目标用户的环境，需使用<code>-i</code>选项：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo -u root -i  <span class="hljs-comment"># 等价于 sudo -i，加载 root 的环境</span><br></code></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p><strong>su</strong></p>
<ul>
<li>
<p>使用 <code>su</code> 切换用户时，不加载目标用户的配置文件（如 <code>.bashrc</code>）。</p>
</li>
<li>
<p>使用<code>su -</code></p>
<p>可完全加载目标用户的环境：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">su - user1  <span class="hljs-comment"># 加载 user1 的 ~/.bashrc、~/.profile 等</span><br></code></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<p><strong>3. 权限与安全</strong></p>
<ul>
<li><strong>sudo</strong>
<ul>
<li>受 <code>/etc/sudoers</code> 文件控制，可精细配置允许执行的命令。</li>
<li>无需知道目标用户密码，依赖当前用户的 sudo 权限。</li>
</ul>
</li>
<li><strong>su</strong>
<ul>
<li>直接使用目标用户的密码验证，若切换到 root，需知道 root 密码。</li>
<li>若配置不当，可能导致权限滥用风险。</li>
</ul>
</li>
</ul>
<br>
<p><strong>三、典型使用场景</strong></p>
<p><strong>场景 1：临时执行特权操作</strong></p>
<ul>
<li>
<p>推荐：</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">sudo &lt;命令&gt;<br></code></pre></td></tr></table></figure>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt update  <span class="hljs-comment"># 以 root 身份更新软件包列表</span><br></code></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>场景 2：完全切换用户环境</strong></p>
<ul>
<li>
<p>推荐：</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">su - &lt;用户名&gt;<br></code></pre></td></tr></table></figure>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">su - devuser  <span class="hljs-comment"># 切换到 devuser 并加载其环境，适合长期操作</span><br></code></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>场景 3：快速获取 root 权限</strong></p>
<ul>
<li>
<p>推荐：</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">sudo su<br></code></pre></td></tr></table></figure>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo su  <span class="hljs-comment"># 切换到 root，需当前用户有 sudo 权限，退出用 exit</span><br></code></pre></td></tr></table></figure>
</li>
</ul>
<br>
<p><strong>四、注意事项</strong></p>
<ol>
<li><strong>避免混淆 <code>sudo su</code> 和 <code>sudo -i</code></strong>
<ul>
<li><code>sudo su</code>：切换到 root，但环境变量继承自当前用户。</li>
<li><code>sudo -i</code>：切换到 root 并加载其完整环境（等价于 <code>su - root</code>）。</li>
</ul>
</li>
<li><strong>安全建议</strong>
<ul>
<li>避免长期使用 <code>su</code> 切换到 root，推荐用 <code>sudo</code> 执行具体命令。</li>
<li>定期检查 <code>/etc/sudoers</code> 文件，确保权限配置最小化。</li>
</ul>
</li>
<li><strong>环境变量问题</strong>
<ul>
<li>若需保留当前用户环境，使用 <code>sudo -E</code>（例如：<code>sudo -E echo $PATH</code>）。</li>
</ul>
</li>
</ol>
<br>
<p><strong>五、对比表格</strong></p>
<table>
<thead>
<tr>
<th><strong>需求</strong></th>
<th><strong>sudo</strong> 命令示例</th>
<th><strong>su</strong> 命令示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>临时执行 root 命令</td>
<td><code>sudo apt install nginx</code></td>
<td><code>su -c &quot;apt install nginx&quot;</code></td>
</tr>
<tr>
<td>完全切换到 root 环境</td>
<td><code>sudo -i</code></td>
<td><code>su - root</code></td>
</tr>
<tr>
<td>切换到普通用户并加载其环境</td>
<td><code>sudo -u user1 -i</code></td>
<td><code>su - user1</code></td>
</tr>
<tr>
<td>执行单个非特权用户命令</td>
<td><code>sudo -u user1 ls /home/user1</code></td>
<td><code>su - user1 -c &quot;ls /home/user1&quot;</code></td>
</tr>
</tbody>
</table>
<p>通过合理选择 <code>sudo</code> 或 <code>su</code>，可平衡操作灵活性与系统安全性。</p>
<hr>
<p><br><br><br></p>
<h2 id="tee">tee</h2>
<p><strong>一、命令用途</strong></p>
<p>将输入的数据同时输出到 <strong>标准输出（终端）</strong> 和 <strong>指定文件</strong>，常用于保存命令执行结果或实时监控数据流。</p>
<br>
<p><strong>二、基本语法</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">tee</span> [选项] 文件名<br></code></pre></td></tr></table></figure>
<br>
<p><strong>三、常用选项</strong></p>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-a</code></td>
<td>追加内容到文件（不覆盖原内容）</td>
</tr>
<tr>
<td><code>-i</code></td>
<td>忽略中断信号（如 <code>Ctrl+C</code>）</td>
</tr>
<tr>
<td><code>-p</code></td>
<td>显示文件创建或覆盖的提示</td>
</tr>
<tr>
<td><code>--help</code></td>
<td>查看帮助信息</td>
</tr>
</tbody>
</table>
<br>
<p><strong>四、示例</strong></p>
<ol>
<li>
<p><strong>覆盖写入文件</strong></p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Hello World&quot;</span> | <span class="hljs-built_in">tee</span> output.txt<br></code></pre></td></tr></table></figure>
<p>输出内容会显示在终端，并写入 <code>output.txt</code>（若文件存在则覆盖）。</p>
</li>
<li>
<p><strong>追加内容到文件</strong></p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Appended line&quot;</span> | <span class="hljs-built_in">tee</span> -a output.txt<br></code></pre></td></tr></table></figure>
<p>内容追加到 <code>output.txt</code> 末尾。</p>
</li>
<li>
<p><strong>处理命令输出</strong></p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">ls</span> -l | <span class="hljs-built_in">tee</span> file_list.txt<br></code></pre></td></tr></table></figure>
<p>列出目录内容，同时保存到 <code>file_list.txt</code>。</p>
</li>
<li>
<p><strong>写入多个文件</strong></p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Data&quot;</span> | <span class="hljs-built_in">tee</span> file1.txt file2.txt<br></code></pre></td></tr></table></figure>
<p>数据同时写入 <code>file1.txt</code> 和 <code>file2.txt</code>，并显示在终端。</p>
</li>
</ol>
<br>
<p><strong>五、注意事项</strong></p>
<ol>
<li>
<p><strong>权限问题</strong></p>
<ul>
<li>
<p>若目标文件需管理员权限，需使用<code>sudo</code></p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Config&quot;</span> | sudo <span class="hljs-built_in">tee</span> /etc/config.conf<br></code></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p><strong>与重定向的区别</strong></p>
<ul>
<li><code>&gt;</code> 仅写入文件，不显示终端；</li>
<li><code>tee</code> 同时显示终端和写入文件。</li>
</ul>
</li>
<li>
<p><strong>实时监控数据流</strong></p>
<ul>
<li>
<p>可用于日志实时查看：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">tail</span> -f /var/log/app.log | <span class="hljs-built_in">tee</span> log_backup.txt<br></code></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<br>
<p><strong>六、总结</strong></p>
<ul>
<li><strong>核心功能</strong>：分流数据到终端和文件。</li>
<li><strong>常用场景</strong>：保存命令输出、实时日志记录、多文件备份。</li>
<li><strong>关键选项</strong>：<code>-a</code>（追加）、<code>-i</code>（忽略中断）、配合 <code>sudo</code> 处理系统文件。</li>
</ul>
<hr>
<p><br><br><br></p>
<h2 id="Terminal-and-Shell">Terminal and Shell</h2>
<p>终端（Terminal）和 Shell 是用户与操作系统交互的核心工具，它们的关系如下：</p>
<br>
<p><strong>一、定义</strong></p>
<ol>
<li><strong>终端（Terminal）</strong>
<ul>
<li><strong>是什么</strong>：用户与操作系统交互的图形界面（如 macOS 的「终端」、iTerm2）。</li>
<li><strong>作用</strong>：显示文本输出，并允许用户输入命令。</li>
<li><strong>本质</strong>：是一个「终端仿真器」，模拟传统电传打字机的功能。</li>
</ul>
</li>
<li><strong>Shell</strong>
<ul>
<li><strong>是什么</strong>：运行在终端中的命令解释器程序（如 Bash、Zsh）。</li>
<li><strong>作用</strong>：接收用户输入的命令，解析并执行，将结果返回给终端。</li>
<li><strong>本质</strong>：是用户与操作系统内核之间的桥梁。</li>
</ul>
</li>
</ol>
<br>
<p><strong>二、核心关系</strong></p>
<ol>
<li><strong>终端调用 Shell</strong>
<ul>
<li>当你打开终端时，它会自动启动一个默认的 Shell（如 macOS 默认使用 <code>zsh</code>）。</li>
<li>用户在终端输入的命令（如 <code>ls</code>）由 Shell 解析并执行。</li>
</ul>
</li>
<li><strong>Shell 依赖终端</strong>
<ul>
<li>Shell 本身不提供界面，需要通过终端（或 SSH 等远程连接工具）与用户交互。</li>
<li>Shell 的输出（如文件列表）会通过终端显示。</li>
</ul>
</li>
</ol>
<br>
<p><strong>三、常见终端与 Shell 组合</strong></p>
<table>
<thead>
<tr>
<th><strong>终端</strong></th>
<th><strong>常见 Shell</strong></th>
<th><strong>特点</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>macOS 终端</td>
<td><code>zsh</code>（默认）</td>
<td>预装，适合日常使用。</td>
</tr>
<tr>
<td>iTerm2</td>
<td><code>zsh</code>/<code>bash</code></td>
<td>功能强大，支持分屏、主题等。</td>
</tr>
<tr>
<td>Windows 终端</td>
<td><code>PowerShell</code>/<code>cmd</code></td>
<td>微软官方工具，兼容旧版命令。</td>
</tr>
<tr>
<td>Git Bash</td>
<td><code>bash</code></td>
<td>专为 Git 设计，模拟 Linux 环境。</td>
</tr>
</tbody>
</table>
<br>
<p><strong>四、如何查看 / 切换 Shell</strong></p>
<ol>
<li>
<p><strong>查看当前 Shell</strong></p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-variable">$SHELL</span>  <span class="hljs-comment"># 输出如 /bin/zsh 或 /bin/bash</span><br></code></pre></td></tr></table></figure>
</li>
<li>
<p><strong>切换 Shell</strong></p>
<ul>
<li>
<p>临时切换</p>
<p>（当前终端有效）：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">bash  <span class="hljs-comment"># 切换到 Bash</span><br>zsh   <span class="hljs-comment"># 切换到 Zsh</span><br></code></pre></td></tr></table></figure>
</li>
<li>
<p>永久切换</p>
<p>（修改默认 Shell）：</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">chsh -s /bin/zsh  <span class="hljs-comment"># macOS 推荐 Zsh</span><br>chsh -s /bin/bash  <span class="hljs-comment"># 切换回 Bash</span><br></code></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<br>
<p><strong>五、为什么需要区分？</strong></p>
<ol>
<li><strong>个性化配置</strong>
<ul>
<li>Shell 支持自定义配置文件（如 <code>.bashrc</code>、<code>.zshrc</code>），可以添加别名、主题、插件等（如 Oh My Zsh）。</li>
<li>终端本身的配置（如配色、快捷键）与 Shell 无关。</li>
</ul>
</li>
<li><strong>跨平台兼容性</strong>
<ul>
<li>同一 Shell（如 Bash）可以在不同终端（如 iTerm2、Git Bash）中运行。</li>
<li>不同 Shell 的语法和功能可能不同（如 Zsh 支持更复杂的自动补全）。</li>
</ul>
</li>
</ol>
<br>
<p><strong>六、总结</strong></p>
<ul>
<li><strong>终端</strong>：是你看到的界面，负责显示和输入。</li>
<li><strong>Shell</strong>：是背后的引擎，负责处理命令。</li>
<li><strong>类比</strong>：终端像浏览器窗口，Shell 像浏览器内核（如 Chrome 的 V8 引擎）。</li>
</ul>
<p>通过理解两者的关系，可以更高效地配置开发环境（如通过 Oh My Zsh 增强 Zsh 功能，或使用 iTerm2 的分屏功能提升效率）。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 使用 curl 安装（推荐）</span><br>sh -c <span class="hljs-string">&quot;<span class="hljs-subst">$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)</span>&quot;</span><br><br><span class="hljs-comment"># 或使用 wget</span><br>sh -c <span class="hljs-string">&quot;<span class="hljs-subst">$(wget -O- https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)</span>&quot;</span><br></code></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://www.haoyep.com/posts/zsh-config-oh-my-zsh/">zsh 安装与配置，使用 oh-my-zsh 美化终端</a></p>
<br>
<p>ps:</p>
<p>终端经常进入预览状态（按Q取消）</p>
<details class="toggle" style="border: 1px solid  #edf4ee"><summary class="toggle-button" style="background-color:  #edf4ee;color:  #17181a">查看详情 </summary><div class="toggle-content"><p><img src="/static/imgs/loading.gif" data-original="https://ggwimgs-1313043536.cos.ap-guangzhou.myqcloud.com/general/Snipaste_2025-03-14_16-17-05.png" alt=""></p>
</div></details> 
<hr>
<p><br><br><br></p>
<h2 id="Terminal-改造">Terminal 改造</h2>
<p>终端工具iTerm2</p>
<p>oh my zsh + 主题powerlevel10k + 命令高亮（zsh-syntax-highlighting）</p>
<details class="toggle" style="border: 1px solid  #edf4ee"><summary class="toggle-button" style="background-color:  #edf4ee;color:  #17181a">zsh-syntax-highlighting安装 </summary><div class="toggle-content"><p>step1:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">~ ···································································································································································································································································· 10:04:37<br>❯ brew install zsh-syntax-highlighting<br>==&gt; Auto-updating Homebrew...<br>Adjust how often this is run with HOMEBREW_AUTO_UPDATE_SECS or disable with<br>HOMEBREW_NO_AUTO_UPDATE. Hide these hints with HOMEBREW_NO_ENV_HINTS (see `man brew`).<br>==&gt; Auto-updated Homebrew!<br>Updated 4 taps (homebrew/services, coursier/formulas, homebrew/core and homebrew/cask).<br>==&gt; New Formulae<br>ab-av1                  cf-terraforming         fpm                     gotz                    iguana                  keyutils                lume                    ov                      restish                 shuttle                 unciv<br>adaptivecpp             cloudfoundry-cli        gcr                     grafana-alloy           immich-go               kirimase                mox                     pivy                    rhai                    sttr                    x86_64-elf-grub<br>algolia                 decompose               gersemi                 gtree                   jaguar                  krep                    netfetch                projectable             rpds-py                 tml                     yalantinglibs<br>alloy                   dvr-scan                git-graph               gut                     jenkins-cli             largetifftools          node-red                protobuf@29             sdl3_ttf                todoist                 yoke<br>anyquery                evans                   globstar                hishtory                kafkactl                lazyjournal             nom                     punktf                  semver                  trdsql                  ytt<br>async_simple            falcosecurity-libs      gnome-online-accounts   i686-elf-grub           kapp                    libgoa                  org-formation           ra-multiplex            sentry-native           typioca                 zlib-ng-compat<br>bpmnlint                fortitude               goimports               icu4c@77                kbld                    libgudev                otel-cli                rattler-index           sequoia-sqv             umockdev<br>==&gt; New Casks<br>candy-crisis                           desktime                               font-source-han-code-jp                fuse-t                                 nvidia-nsight-compute                  sokim                                  veracrypt-fuse-t<br>charles@4                              focu                                   font-special-gothic-condensed-one      irpf2025                               opera-air                              soundanchor<br>cloudflare-warp@beta                   font-playpen-sans-arabic               font-special-gothic-expanded-one       kate                                   pairpods                               trae<br>consul                                 font-playpen-sans-hebrew               font-winky-rough                       macskk                                 pareto-security                        trae-cn<br>coterm                                 font-sf-mono-nerd-font-ligaturized     font-winky-sans                        mouseless@preview                      qt-design-studio                       ua-midi-control<br><br>You have 45 outdated formulae installed.<br><br>==&gt; Fetching zsh-syntax-highlighting<br>==&gt; Downloading https://mirrors.ustc.edu.cn/homebrew-bottles/bottles/zsh-syntax-highlighting-0.8.0.all.bottle.1.tar.gz<br>######################################################################################################################################################################################################################################################### 100.0%<br>==&gt; Pouring zsh-syntax-highlighting-0.8.0.all.bottle.1.tar.gz<br>==&gt; Caveats<br>To activate the syntax highlighting, add the following at the end of your .zshrc:<br>  source /opt/homebrew/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh<br><br>If you receive &quot;highlighters directory not found&quot; error message,<br>you may need to add the following to your .zshenv:<br>  export ZSH_HIGHLIGHT_HIGHLIGHTERS_DIR=/opt/homebrew/share/zsh-syntax-highlighting/highlighters<br>==&gt; Summary<br>🍺  /opt/homebrew/Cellar/zsh-syntax-highlighting/0.8.0: 28 files, 206.4KB<br>==&gt; Running `brew cleanup zsh-syntax-highlighting`...<br>Disable this behaviour by setting HOMEBREW_NO_INSTALL_CLEANUP.<br>Hide these hints with HOMEBREW_NO_ENV_HINTS (see `man brew`).<br></code></pre></td></tr></table></figure>
<p>下载后在上面可以看到安装的地址为<code>/opt/homebrew/Cellar/zsh-syntax-highlighting/0.8.0</code></p>
<br>
<p>step2:</p>
<p>安装地址 + <code>/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;source /opt/homebrew/Cellar/zsh-syntax-highlighting/0.8.0/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh&quot;</span> &gt;&gt; ~/.zshrc<br></code></pre></td></tr></table></figure>
</div></details> 
<hr>
<p><br><br><br></p>
<h2 id="Terminal-快捷键">Terminal 快捷键</h2>
<ul>
<li><strong><code>Ctrl+U</code></strong>：删除光标前的所有内容（清空当前命令行）。</li>
<li><strong><code>Ctrl+K</code></strong>：删除光标后的所有内容。</li>
</ul>
<hr>
<p><br><br><br></p>
<h2 id="脚本">脚本</h2>
<h3 id="查找可用端口区间">&gt; 查找可用端口区间</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">检查参数是否为有效的整数</span><br>is_valid_integer() &#123;<br>    if [[ $1 =~ ^[0-9]+$ ]]; then<br>        return 0<br>    else<br>        return 1<br>    fi<br>&#125;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">一次性获取指定范围内所有被占用的端口</span><br>get_used_ports() &#123;<br>    local start_port=$1<br>    local end_port=$2<br>    local temp_file=$(mktemp)<br>    # 将 lsof 命令输出保存到临时文件，同时将错误输出重定向到 /dev/null<br>    sudo lsof -PiTCP -sTCP:LISTEN -n 2&gt;/dev/null &gt; &quot;$temp_file&quot;<br>    awk -v start=&quot;$start_port&quot; -v end=&quot;$end_port&quot; &#x27;&#123;<br>        split($9, parts, &quot;:&quot;);<br>        port = parts[2];<br>        if (port &gt;= start &amp;&amp; port &lt;= end) &#123;<br>            print port<br>        &#125;<br>    &#125;&#x27; &quot;$temp_file&quot; | sort -n | uniq<br>    rm &quot;$temp_file&quot;<br>&#125;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">查找可用端口区间</span><br>find_available_port_ranges() &#123;<br>    local start_port=$1<br>    local end_port=$2<br>    local used_ports=($(get_used_ports &quot;$start_port&quot; &quot;$end_port&quot;))<br>    local in_range=false<br>    local start<br>    for ((port = start_port; port &lt;= end_port; port++)); do<br>        local is_used=false<br>        for used_port in &quot;$&#123;used_ports[@]&#125;&quot;; do<br>            if [[ $used_port -eq $port ]]; then<br>                is_used=true<br>                break<br>            fi<br>        done<br>        if ! $is_used; then<br>            if ! $in_range; then<br>                start=$port<br>                in_range=true<br>            fi<br>        else<br>            if $in_range; then<br>                local length=$((port - start))<br>                if [[ $start -eq $((port - 1)) ]]; then<br>                    echo &quot;$start ($length)&quot;<br>                else<br>                    echo &quot;$start-$((port - 1)) ($length)&quot;<br>                fi<br>                in_range=false<br>            fi<br>        fi<br>    done<br>    if $in_range; then<br>        local length=$((end_port - start + 1))<br>        if [[ $start -eq $end_port ]]; then<br>            echo &quot;$start ($length)&quot;<br>        else<br>            echo &quot;$start-$end_port ($length)&quot;<br>        fi<br>    fi<br>&#125;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">检查是否传入了两个参数</span><br>if [ $# -ne 2 ]; then<br>    echo &quot;用法: $0 &lt;起始端口&gt; &lt;结束端口&gt;&quot;<br>    exit 1<br>fi<br><br>start_port=$1<br>end_port=$2<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">检查参数是否为有效的整数</span><br>if ! is_valid_integer &quot;$start_port&quot; || ! is_valid_integer &quot;$end_port&quot;; then<br>    echo &quot;错误: 端口号必须是有效的整数。&quot;<br>    exit 1<br>fi<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">检查起始端口是否小于等于结束端口</span><br>if [ &quot;$start_port&quot; -gt &quot;$end_port&quot; ]; then<br>    echo &quot;错误: 起始端口必须小于等于结束端口。&quot;<br>    exit 1<br>fi<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">查找并输出可用端口区间</span><br>echo &quot;在 $start_port 到 $end_port 范围内的连续可用端口区间:&quot;<br>find_available_port_ranges &quot;$start_port&quot; &quot;$end_port&quot;<br></code></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://gxblogs.com">ggw &amp; xpl</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://gxblogs.com/posts/49872/">https://gxblogs.com/posts/49872/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://gxblogs.com" target="_blank">GXBLOGS</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/linux/">linux</a></div><div class="post_share"><div class="social-share" data-image="https://ggwimgs-1313043536.cos.ap-guangzhou.myqcloud.com/go/Snipaste_2024-12-20_17-08-48.png" data-sites="wechat,qq"></div><link rel="stylesheet" href="/pluginsSrc/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="/pluginsSrc/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://ggwimgs-1313043536.cos.ap-guangzhou.myqcloud.com/blogs/Snipaste_2023-01-05_13-03-06.png" target="_blank"><img class="post-qr-code-img" src="/static/imgs/loading.gif" data-original="https://ggwimgs-1313043536.cos.ap-guangzhou.myqcloud.com/blogs/Snipaste_2023-01-05_13-03-06.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://ggwimgs-1313043536.cos.ap-guangzhou.myqcloud.com/blogs/Snipaste_2023-01-05_13-04-50.png" target="_blank"><img class="post-qr-code-img" src="/static/imgs/loading.gif" data-original="https://ggwimgs-1313043536.cos.ap-guangzhou.myqcloud.com/blogs/Snipaste_2023-01-05_13-04-50.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/19502/"><img class="prev-cover" src="/static/imgs/loading.gif" data-original="https://ggwimgs-1313043536.cos.ap-guangzhou.myqcloud.com/go/Snipaste_2025-01-08_10-26-59.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">connection pool</div></div></a></div><div class="next-post pull-right"><a href="/posts/1808/"><img class="next-cover" src="/static/imgs/loading.gif" data-original="https://ggwimgs-1313043536.cos.ap-guangzhou.myqcloud.com/go/Snipaste_2024-09-30_16-11-15.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">golang并发编程</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/34487/" title="Linux学习笔记"><img class="cover" src="/static/imgs/loading.gif" data-original="https://ggwimgs-1313043536.cos.ap-guangzhou.myqcloud.com/linux/Snipaste_2023-01-08_13-42-45.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-01-08</div><div class="title">Linux学习笔记</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#BSD-System-V-%E9%A3%8E%E6%A0%BC"><span class="toc-text">BSD &amp; System V 风格</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#certificate-%E8%AF%81%E4%B9%A6"><span class="toc-text">certificate 证书</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dig"><span class="toc-text">dig</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#file"><span class="toc-text">file</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#lsof"><span class="toc-text">lsof</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#openssl-s-client"><span class="toc-text">openssl s_client</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#port"><span class="toc-text">port</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ps"><span class="toc-text">ps</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SS"><span class="toc-text">SS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sudo-su"><span class="toc-text">sudo &amp; su</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tee"><span class="toc-text">tee</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Terminal-and-Shell"><span class="toc-text">Terminal and Shell</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Terminal-%E6%94%B9%E9%80%A0"><span class="toc-text">Terminal 改造</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Terminal-%E5%BF%AB%E6%8D%B7%E9%94%AE"><span class="toc-text">Terminal 快捷键</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%84%9A%E6%9C%AC"><span class="toc-text">脚本</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E6%89%BE%E5%8F%AF%E7%94%A8%E7%AB%AF%E5%8F%A3%E5%8C%BA%E9%97%B4"><span class="toc-text">&gt; 查找可用端口区间</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background: rgb(112, 112, 112)"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2025 By ggw & xpl</div><div class="footer_custom_text">都是科技与狠活啊</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="聊天"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/pluginsSrc/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="/pluginsSrc/instant.page/instantpage.js" type="module"></script><script src="/pluginsSrc/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'QvVqZWBQWj9Aq2xrw4Z8z8Pz-gzGzoHsz',
      appKey: 'COANudzj20V6IrCfAsD1Ufya',
      avatar: 'robohash',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('/pluginsSrc/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script src="/js/ggwsettings.js"></script><script>(function(d, w, c) {
    w.ChatraID = 'dKkRxvMac7f9AeKhu';
    var s = d.createElement('script');
    w[c] = w[c] || function() {
        (w[c].q = w[c].q || []).push(arguments);
    };
    s.async = true;
    s.src = 'https://call.chatra.io/chatra.js';
    if (d.head) d.head.appendChild(s);
})(document, window, 'Chatra');

if (true) {
  var chatBtnFn = () => {
    var chatBtn = document.getElementById("chat_btn")
    chatBtn.addEventListener("click", function(){
      Chatra('openChat')
    });
  }
  chatBtnFn()
} else {
  if (true) {
    function chatBtnHide () {
      Chatra('hide')
    }
    function chatBtnShow () {
      Chatra('show')
    }
  }
}</script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginRootPath":"live2dw/","tagMode":false});</script>
        <style>
            [bg-lazy] {
                background-image: none !important;
                background-color: #eee !important;
            }
        </style>
        <script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(r){r.imageLazyLoadSetting.processImages=t;var e=r.imageLazyLoadSetting.isSPA,n=r.imageLazyLoadSetting.preloadRatio||1,c=a();function a(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function t(){e&&(c=a());for(var t,o=0;o<c.length;o++)0<=(t=(t=c[o]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(r.innerHeight*n||document.documentElement.clientHeight*n)&&function(){var t,e,n,a,i=c[o];e=function(){c=c.filter(function(t){return i!==t}),r.imageLazyLoadSetting.onImageLoaded&&r.imageLazyLoadSetting.onImageLoaded(i)},(t=i).hasAttribute("bg-lazy")?(t.removeAttribute("bg-lazy"),e&&e()):(n=new Image,a=t.getAttribute("data-original"),n.onload=function(){t.src=a,t.removeAttribute("data-original"),e&&e()},t.src!==a&&(n.src=a))}()}function i(){clearTimeout(t.tId),t.tId=setTimeout(t,500)}t(),document.addEventListener("scroll",i),r.addEventListener("resize",i),r.addEventListener("orientationchange",i)}(this);</script></body></html>